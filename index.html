<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DeepSeek Chat</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-container">
        <div class="sidebar">
            <div class="sidebar-header">
                <img src="https://www.deepseek.com/favicon.ico" alt="DeepSeek" class="sidebar-logo">
                <span>DeepSeek</span>
            </div>
            <div class="sidebar-content">
                <button class="new-chat-button">
                    <svg width="16" height="16" viewBox="0 0 24 24">
                        <path fill="currentColor" d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                    </svg>
                    新对话
                </button>
                <div class="chat-history">
                    <!-- 聊天历史记录将在这里显示 -->
                </div>
                <div class="user-profile">
                    <button class="user-info-button">
                        <div class="user-avatar">
                            <img src="https://www.deepseek.com/favicon.ico" alt="User">
                        </div>
                        <div class="user-details">
                            <div class="user-name">183****3757</div>
                        </div>
                        <svg class="more-icon" width="16" height="16" viewBox="0 0 24 24">
                            <path fill="currentColor" d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
        
        <div class="main-content">
            <header>
                <div class="header-left">
                    <span class="header-title">新对话</span>
                </div>
                <button class="toggle-sidebar">
                    <svg width="24" height="24" viewBox="0 0 24 24">
                        <path fill="currentColor" d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
                    </svg>
                </button>
            </header>
            
            <main>
                <div class="welcome-container">
                    <div class="logo">
                        <svg width="64" height="64" viewBox="0 0 24 24" fill="#4169E1">
                            <path d="M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 4.84 3.44 8.87 8 9.8V15H8v-3h2V9.5C10 7.57 11.57 6 13.5 6H16v3h-2c-.55 0-1 .45-1 1v2h3v3h-3v6.95c5.05-.5 9-4.76 9-9.95z"/>
                        </svg>
                    </div>
                    <h1>嗨！我是 DeepSeek</h1>
                    <p>我可以帮你搜索、答疑、写作，请把你的任务交给我吧...</p>
                </div>
                <div class="chat-container" style="display: none;">
                </div>
            </main>
            
            <footer>
                <div class="message-box">
                    <div class="feature-buttons">
                        <button class="feature-button">
                            <svg width="20" height="20" viewBox="0 0 24 24">
                                <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
                            </svg>
                            深度思考 (R1)
                        </button>
                        <button class="feature-button">
                            <svg width="20" height="20" viewBox="0 0 24 24">
                                <path fill="currentColor" d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                            </svg>
                            联网搜索
                        </button>
                    </div>
                    <div class="input-container">
                        <input type="text" placeholder="给 DeepSeek 发送消息" class="message-input">
                        <button class="send-button">
                            <svg width="20" height="20" viewBox="0 0 24 24">
                                <path fill="currentColor" d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </footer>
        </div>
    </div>
</body>
<script>
    const appContainer = document.querySelector('.app-container');
    const toggleButton = document.querySelector('.toggle-sidebar');
    const welcomeContainer = document.querySelector('.welcome-container');
    const chatContainer = document.querySelector('.chat-container');
    const messageInput = document.querySelector('.message-input');
    const sendButton = document.querySelector('.send-button');
    const newChatButton = document.querySelector('.new-chat-button');
    const chatHistory = document.querySelector('.chat-history');
    let currentChatId = null;
    let isFirstMessage = true;

    // 生成唯一ID
    function generateId() {
        return Date.now().toString(36) + Math.random().toString(36).substr(2);
    }

    // 从本地存储加载聊天历史
    function loadChatHistory() {
        const history = JSON.parse(localStorage.getItem('chatHistory')) || [];
        chatHistory.innerHTML = '';
        
        history.forEach(chat => {
            const chatElement = document.createElement('div');
            chatElement.className = 'chat-item';
            chatElement.innerHTML = `
                <div class="chat-item-content" data-id="${chat.id}">
                    <svg width="16" height="16" viewBox="0 0 24 24">
                        <path fill="currentColor" d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"/>
                    </svg>
                    <span>${chat.title || '新对话'}</span>
                    <button class="delete-chat" title="删除对话">
                        <svg width="14" height="14" viewBox="0 0 24 24">
                            <path fill="currentColor" d="M9 3v1H4v2h1v13c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V6h1V4h-5V3H9zm0 5h2v9H9V8zm4 0h2v9h-2V8z"/>
                        </svg>
                    </button>
                </div>
            `;
            chatHistory.appendChild(chatElement);

            // 为每个聊天项添加点击事件
            const contentElement = chatElement.querySelector('.chat-item-content');
            contentElement.addEventListener('click', (e) => {
                // 如果点击的是删除按钮，不要触发加载聊天
                if (!e.target.closest('.delete-chat')) {
                    loadChat(chat.id);
                }
            });

            // 为删除按钮添加点击事件
            const deleteButton = chatElement.querySelector('.delete-chat');
            deleteButton.addEventListener('click', (e) => {
                e.stopPropagation(); // 阻止事件冒泡
                deleteChat(chat.id);
            });
        });
    }

    // 加载特定的聊天
    function loadChat(chatId) {
        const history = JSON.parse(localStorage.getItem('chatHistory')) || [];
        const chat = history.find(c => c.id === chatId);
        if (!chat) return;

        currentChatId = chatId;
        chatContainer.innerHTML = '';
        welcomeContainer.style.display = 'none';
        chatContainer.style.display = 'flex';
        isFirstMessage = false;

        chat.messages.forEach(msg => {
            addMessage(msg.content, msg.type, false);
        });

        // 更新所有聊天项的样式
        document.querySelectorAll('.chat-item-content').forEach(item => {
            item.classList.toggle('active', item.dataset.id === chatId);
        });
    }

    // 保存聊天记录
    function saveChat(message, type) {
        const history = JSON.parse(localStorage.getItem('chatHistory')) || [];
        
        if (isFirstMessage) {
            currentChatId = generateId();
            const newChat = {
                id: currentChatId,
                title: message.substring(0, 20) + '...',
                messages: []
            };
            history.unshift(newChat);
            isFirstMessage = false;
        }

        const chat = history.find(c => c.id === currentChatId);
        if (chat) {
            chat.messages.push({ content: message, type });
            localStorage.setItem('chatHistory', JSON.stringify(history));
            loadChatHistory(); // 刷新侧边栏
        }
    }

    // 发送消息的函数
    function sendMessage() {
        const message = messageInput.value.trim();
        if (!message) return;

        if (isFirstMessage) {
            welcomeContainer.style.display = 'none';
            chatContainer.style.display = 'flex';
        }

        addMessage(message, 'user', true);
        messageInput.value = '';

        setTimeout(() => {
            const aiResponse = getAIResponse(message);
            addMessage(aiResponse, 'ai', true);
        }, 1000);
    }

    // 添加消息到聊天界面
    function addMessage(text, type, save = true) {
        const messageDiv = document.createElement('div');
        messageDiv.className = `message ${type}-message`;

        const messageHTML = type === 'user' ? `
            <div class="message-content">
                <div class="message-text">${text.replace(/\n/g, '<br>')}</div>
            </div>
            <div class="message-avatar">
                <svg viewBox="0 0 24 24" width="24" height="24">
                    <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
                </svg>
            </div>
        ` : `
            <div class="message-avatar">
                <img src="https://www.deepseek.com/favicon.ico" alt="DeepSeek">
            </div>
            <div class="message-content">
                <div class="message-text">${text.replace(/\n/g, '<br>')}</div>
            </div>
        `;

        messageDiv.innerHTML = messageHTML;
        chatContainer.appendChild(messageDiv);
        chatContainer.scrollTop = chatContainer.scrollHeight;

        if (save) {
            saveChat(text, type);
        }
    }

    // 新对话按钮点击事件
    newChatButton.addEventListener('click', () => {
        currentChatId = null;
        isFirstMessage = true;
        chatContainer.innerHTML = '';
        welcomeContainer.style.display = 'flex';
        chatContainer.style.display = 'none';
        messageInput.value = '';
        
        // 移除所有聊天项的激活状态
        document.querySelectorAll('.chat-item-content').forEach(item => {
            item.classList.remove('active');
        });
    });

    // 模拟AI回复
    function getAIResponse(userMessage) {
        const responses = [
            "我明白了，让我来帮你解答这个问题。",
            "这是一个很好的问题，我的建议是...",
            "根据你的描述，我认为...",
            "让我为你分析一下这个情况。",
            "这个问题有几个关键点需要考虑："
        ];
        return responses[Math.floor(Math.random() * responses.length)];
    }

    // 添加事件监听器
    toggleButton.addEventListener('click', () => {
        appContainer.classList.toggle('sidebar-open');
    });

    sendButton.addEventListener('click', sendMessage);
    messageInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter' && !e.shiftKey) {
            e.preventDefault();
            sendMessage();
        }
    });

    // 删除聊天记录
    function deleteChat(chatId) {
        if (!confirm('确定要删除这个对话吗？')) return;

        const history = JSON.parse(localStorage.getItem('chatHistory')) || [];
        const newHistory = history.filter(chat => chat.id !== chatId);
        localStorage.setItem('chatHistory', JSON.stringify(newHistory));

        // 如果删除的是当前对话，重置到欢迎界面
        if (chatId === currentChatId) {
            currentChatId = null;
            isFirstMessage = true;
            chatContainer.innerHTML = '';
            welcomeContainer.style.display = 'flex';
            chatContainer.style.display = 'none';
            messageInput.value = '';
        }

        loadChatHistory(); // 刷新侧边栏
    }

    // 初始加载聊天历史
    loadChatHistory();
</script>
</html> 